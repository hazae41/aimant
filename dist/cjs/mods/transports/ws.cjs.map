{"version":3,"file":"ws.cjs","sources":["../../../../src/mods/transports/ws.ts"],"sourcesContent":["import { Tls } from \"mods/tls.js\"\n\nexport class TlsOverWebSocket extends Tls {\n  readonly class = TlsOverWebSocket\n\n  constructor(\n    readonly socket: WebSocket\n  ) {\n    super()\n\n    socket.addEventListener(\"message\", async e => {\n      this.onData(Buffer.from(await e.data.arrayBuffer()))\n    }, { passive: true })\n  }\n\n  async sendRaw(buffer: Buffer) {\n    console.log(\"->\", buffer)\n    this.socket.send(buffer)\n  }\n\n  private async onData(buffer: Buffer) {\n    console.log(\"<-\", buffer)\n  }\n}"],"names":["Tls","__awaiter"],"mappings":";;;;;AAEM,MAAO,gBAAiB,SAAQA,OAAG,CAAA;AAGvC,IAAA,WAAA,CACW,MAAiB,EAAA;AAE1B,QAAA,KAAK,EAAE,CAAA;QAFE,IAAM,CAAA,MAAA,GAAN,MAAM,CAAW;QAHnB,IAAK,CAAA,KAAA,GAAG,gBAAgB,CAAA;QAO/B,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAM,CAAC,KAAGC,eAAA,CAAA,IAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;AAC3C,YAAA,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,CAAA;SACrD,CAAA,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAA;KACtB;AAEK,IAAA,OAAO,CAAC,MAAc,EAAA;;AAC1B,YAAA,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAA;AACzB,YAAA,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;SACzB,CAAA,CAAA;AAAA,KAAA;AAEa,IAAA,MAAM,CAAC,MAAc,EAAA;;AACjC,YAAA,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAA;SAC1B,CAAA,CAAA;AAAA,KAAA;AACF;;;;"}