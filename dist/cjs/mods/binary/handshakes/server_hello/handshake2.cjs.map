{"version":3,"file":"handshake2.cjs","sources":["../../../../../../src/mods/binary/handshakes/server_hello/handshake2.ts"],"sourcesContent":["import { Binary } from \"libs/binary.js\";\nimport { Number16, Number8 } from \"mods/binary/number.js\";\nimport { Random } from \"mods/binary/random.js\";\nimport { BufferVector, Vector } from \"mods/binary/vector.js\";\nimport { Handshake } from \"../handshake.js\";\n\nexport class ServerHello2 {\n  readonly class = ServerHello2\n\n  static type = Handshake.types.server_hello\n\n  constructor(\n    readonly server_version: number,\n    readonly random: Random,\n    readonly session_id: Vector<Number8>,\n    readonly cipher_suite: number,\n    readonly compression_methods: Vector<Number8>,\n    readonly extensions?: Vector<Number16>\n  ) { }\n\n  static read(binary: Binary, length: number) {\n    const start = binary.offset\n\n    const server_version = binary.readUint16()\n    const random = Random.read(binary)\n    const session_id = BufferVector.read<Number8>(binary, Number8)\n    const cipher_suite = binary.readUint16()\n    const compression_methods = BufferVector.read<Number8>(binary, Number8)\n\n    if (binary.offset - start > length)\n      throw new Error(`Invalid ${this.name} length`)\n\n    const extensions = binary.offset - start < length\n      ? BufferVector.read<Number16>(binary, Number16)\n      : undefined\n\n    return new this(server_version, random, session_id, cipher_suite, compression_methods, extensions)\n  }\n}"],"names":["random","Random","BufferVector","Number8","Number16","Handshake"],"mappings":";;;;;;;MAMa,YAAY,CAAA;IAKvB,WACW,CAAA,cAAsB,EACtB,MAAc,EACd,UAA2B,EAC3B,YAAoB,EACpB,mBAAoC,EACpC,UAA6B,EAAA;QAL7B,IAAc,CAAA,cAAA,GAAd,cAAc,CAAQ;QACtB,IAAM,CAAA,MAAA,GAAN,MAAM,CAAQ;QACd,IAAU,CAAA,UAAA,GAAV,UAAU,CAAiB;QAC3B,IAAY,CAAA,YAAA,GAAZ,YAAY,CAAQ;QACpB,IAAmB,CAAA,mBAAA,GAAnB,mBAAmB,CAAiB;QACpC,IAAU,CAAA,UAAA,GAAV,UAAU,CAAmB;QAV/B,IAAK,CAAA,KAAA,GAAG,YAAY,CAAA;KAWxB;AAEL,IAAA,OAAO,IAAI,CAAC,MAAc,EAAE,MAAc,EAAA;AACxC,QAAA,MAAM,KAAK,GAAG,MAAM,CAAC,MAAM,CAAA;AAE3B,QAAA,MAAM,cAAc,GAAG,MAAM,CAAC,UAAU,EAAE,CAAA;QAC1C,MAAMA,QAAM,GAAGC,aAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;QAClC,MAAM,UAAU,GAAGC,mBAAY,CAAC,IAAI,CAAU,MAAM,EAAEC,cAAO,CAAC,CAAA;AAC9D,QAAA,MAAM,YAAY,GAAG,MAAM,CAAC,UAAU,EAAE,CAAA;QACxC,MAAM,mBAAmB,GAAGD,mBAAY,CAAC,IAAI,CAAU,MAAM,EAAEC,cAAO,CAAC,CAAA;AAEvE,QAAA,IAAI,MAAM,CAAC,MAAM,GAAG,KAAK,GAAG,MAAM;YAChC,MAAM,IAAI,KAAK,CAAC,CAAA,QAAA,EAAW,IAAI,CAAC,IAAI,CAAS,OAAA,CAAA,CAAC,CAAA;QAEhD,MAAM,UAAU,GAAG,MAAM,CAAC,MAAM,GAAG,KAAK,GAAG,MAAM;cAC7CD,mBAAY,CAAC,IAAI,CAAW,MAAM,EAAEE,eAAQ,CAAC;cAC7C,SAAS,CAAA;AAEb,QAAA,OAAO,IAAI,IAAI,CAAC,cAAc,EAAEJ,QAAM,EAAE,UAAU,EAAE,YAAY,EAAE,mBAAmB,EAAE,UAAU,CAAC,CAAA;KACnG;;AA5BM,YAAA,CAAA,IAAI,GAAGK,mBAAS,CAAC,KAAK,CAAC,YAAY;;;;"}