{"version":3,"file":"extension.cjs","sources":["../../../../../src/mods/binary/extensions/extension.ts"],"sourcesContent":["import { Binary } from \"libs/binary.js\"\nimport { Number16, OpaqueVector } from \"mods/binary/vector.js\"\n\nexport interface IExtension {\n  type: number\n  export(): Binary\n}\n\nexport class Extension {\n  readonly class = Extension\n\n  constructor(\n    readonly type: number,\n    readonly data: OpaqueVector<Number16>\n  ) { }\n\n  static from(extension: IExtension) {\n    const buffer = extension.export().buffer\n    const data = new OpaqueVector(buffer, Number16)\n\n    return new this(extension.type, data)\n  }\n\n  size() {\n    return 2 + this.data.size()\n  }\n\n  write(binary: Binary) {\n    binary.writeUint16(this.type)\n    this.data.write(binary)\n  }\n}"],"names":["OpaqueVector","Number16"],"mappings":";;;;MAQa,SAAS,CAAA;IAGpB,WACW,CAAA,IAAY,EACZ,IAA4B,EAAA;QAD5B,IAAI,CAAA,IAAA,GAAJ,IAAI,CAAQ;QACZ,IAAI,CAAA,IAAA,GAAJ,IAAI,CAAwB;QAJ9B,IAAK,CAAA,KAAA,GAAG,SAAS,CAAA;KAKrB;IAEL,OAAO,IAAI,CAAC,SAAqB,EAAA;QAC/B,MAAM,MAAM,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,MAAM,CAAA;QACxC,MAAM,IAAI,GAAG,IAAIA,mBAAY,CAAC,MAAM,EAAEC,eAAQ,CAAC,CAAA;QAE/C,OAAO,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;KACtC;IAED,IAAI,GAAA;QACF,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAA;KAC5B;AAED,IAAA,KAAK,CAAC,MAAc,EAAA;AAClB,QAAA,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;AAC7B,QAAA,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAA;KACxB;AACF;;;;"}